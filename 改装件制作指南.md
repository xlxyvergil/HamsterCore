# 改装件制作指南

本指南将详细介绍如何为HamsterCore模组制作完整的改装件，包括JSON配置、模型和材质文件的编写。

## 一、改装件基本结构

一个完整的改装件需要以下文件：

1. **JSON配置文件**：定义改装件的属性、词缀、适用范围等
2. **模型文件**：定义改装件的3D模型
3. **材质文件**：定义改装件的纹理

## 二、JSON配置文件

### 1. 文件路径

JSON配置文件位于：
```
src/main/resources/data/hamstercore/modifications/[改装件ID].json
```

### 2. 配置结构

```json
{
  "variant": "hamstercore:[改装件ID]",
  "weight": 100,
  "dimensions": [],
  "category": "primary",
  "unique": true,
  "rarity": "uncommon",
  "affixes": [
    {
      "type": "hamstercore:cold",
      "name": "cold",
      "value": 0.9,
      "operation": "ADDITION"
    }
  ],
  "use_special_socket": false,
  "mutualExclusionGroups": ["rifle_cold_slug_group"]
}
```

### 3. 配置字段说明

| 字段名 | 类型 | 说明 |
|-------|------|------|
| variant | ResourceLocation | 改装件的唯一标识符 |
| weight | int | 生成权重，数值越大生成概率越高 |
| dimensions | Set<ResourceLocation> | 适用维度，空列表表示所有维度 |
| category | String | 武器类别：primary（主武器）、secondary（副武器）等 |
| unique | boolean | 是否唯一，true表示同一物品只能装一个 |
| rarity | String | 稀有度：common, uncommon, rare, epic, mythic |
| affixes | List<ModificationAffix> | 词缀列表，定义改装件的属性效果 |
| use_special_socket | boolean | 是否使用特殊槽位，true为特殊槽位，false为普通槽位 |
| mutualExclusionGroups | List<String> | 互斥组，同组改装件不能同时安装 |

### 4. 稀有度权重与维度配置

本系统定义了5个稀有度等级，每个稀有度都有对应的权重和维度限制：

#### 稀有度配置表

| 稀有度 | 权重 | 适用维度 | 掉落特点 |
|--------|------|----------|----------|
| **COMMON** | 100 | 主世界+下界 | 基础改装件，前期即可获取 |
| **UNCOMMON** | 50 | 全维度 | 略优于基础，前期提升体验 |
| **RARE** | 20 | 全维度 | 核心追求装备，全程可掉落 |
| **EPIC** | 10 | 下界+末地 | 高级改装件，需要冒险获取 |
| **MYTHIC** | 0.1 | 仅末地 | 顶级改装件，终局目标 |

#### 权重比例说明

- COMMON:UNCOMMON:RARE:EPIC:MYTHIC = 100:50:20:10:1
- MYTHIC 的掉落概率约为 COMMON 的 1%
- RARE 改装件可在所有维度掉落，作为过渡核心装备

#### 维度配置示例

**COMMON 改装件**:
```json
{
  "weight": 100,
  "dimensions": ["minecraft:overworld", "minecraft:the_nether"],
  "rarity": "common"
}
```

**UNCOMMON 改装件**:
```json
{
  "weight": 50,
  "dimensions": [],
  "rarity": "uncommon"
}
```

**RARE 改装件**:
```json
{
  "weight": 20,
  "dimensions": [],
  "rarity": "rare"
}
```

**EPIC 改装件**:
```json
{
  "weight": 10,
  "dimensions": ["minecraft:the_nether", "minecraft:the_end"],
  "rarity": "epic"
}
```

**MYTHIC 改装件**:
```json
{
  "weight": 0.1,
  "dimensions": ["minecraft:the_end"],
  "rarity": "mythic"
}
```

#### 设计理念

1. **COMMON**: 限制在主世界和下界，避免玩家过早进入末地就能刷到高级改装件
2. **UNCOMMON/RARE**: 全维度掉落，作为核心过渡装备，任何阶段都能获取
3. **EPIC**: 需要冒险（下界+末地），符合史诗定位
4. **MYTHIC**: 仅末地，成为终局内容和成就象征

### 5. 词缀配置

每个词缀包含以下字段：

| 字段名 | 类型 | 说明 |
|-------|------|------|
| type | String | 词缀类型，命名空间+属性id，如"hamstercore:cold" |
| name | String | 属性显示名称，如"cold" |
| value | double | 属性值 |
| operation | String | 操作类型：ADDITION, MULTIPLY_BASE, MULTIPLY_TOTAL |

## 三、模型文件

### 1. 文件路径

模型文件位于：
```
src/main/resources/assets/hamstercore/models/item/modification/[改装件ID].json
```

### 2. 模型结构

```json
{
  "parent": "item/generated",
  "textures": {
    "layer0": "hamstercore:textures/item/modification/[改装件ID]"
  }
}
```

### 3. 高级模型配置

如果需要更复杂的模型，可以使用自定义模型：

```json
{
  "parent": "item/generated",
  "textures": {
    "layer0": "hamstercore:textures/item/modification/[改装件ID]_base",
    "layer1": "hamstercore:textures/item/modification/[改装件ID]_overlay"
  },
  "overrides": [
    {
      "predicate": {
        "custom_model_data": 1
      },
      "model": "hamstercore:item/modification/[改装件ID]_variant"
    }
  ]
}
```

## 四、材质文件

### 1. 文件路径

材质文件位于：
```
src/main/resources/assets/hamstercore/textures/item/modification/[改装件ID].png
```

### 2. 材质要求

- 推荐分辨率：16x16或32x32
- 格式：PNG
- 支持透明通道

### 3. 材质命名规范

- 基础材质：`[改装件ID].png`
- 叠加材质：`[改装件ID]_overlay.png`
- 变体材质：`[改装件ID]_variant.png`

## 五、互斥组使用

### 1. 基本用法

将需要互斥的改装件放入同一个互斥组：

```json
// rifle_cold_slug.json
"mutualExclusionGroups": ["rifle_cold_slug_group"]

// rifle_cold_slug_prime.json
"mutualExclusionGroups": ["rifle_cold_slug_group"]
```

### 2. 多组互斥

一个改装件可以属于多个互斥组：

```json
"mutualExclusionGroups": ["group1", "group2"]
```

### 3. 无互斥改装件

对于没有互斥限制的改装件，可以不填写该字段或填写空列表：

```json
// 方式一：不填写该字段
{ /* 其他配置 */ }

// 方式二：填写空列表
"mutualExclusionGroups": []
```

## 六、示例配置

### 1. 完整的改装件配置

**JSON配置文件** (`data/hamstercore/modifications/rifle_cold_slug.json`):

```json
{
  "variant": "hamstercore:rifle_cold_slug",
  "weight": 100,
  "dimensions": [],
  "category": "primary",
  "unique": true,
  "rarity": "uncommon",
  "affixes": [
    {
      "type": "hamstercore:cold",
      "name": "cold",
      "value": 0.9,
      "operation": "ADDITION"
    }
  ],
  "use_special_socket": false,
  "mutualExclusionGroups": ["rifle_cold_slug_group"]
}
```

**模型文件** (`assets/hamstercore/models/item/modification/rifle_cold_slug.json`):

```json
{
  "parent": "item/generated",
  "textures": {
    "layer0": "hamstercore:textures/item/modification/rifle_cold_slug"
  }
}
```

**材质文件**：
- `assets/hamstercore/textures/item/modification/rifle_cold_slug.png`

## 七、可应用的属性列表

根据HamsterCore和TaczAttributeAdd (TAA) 的属性系统，以下是可应用的属性列表：

### HamsterCore 属性

#### 基础属性
- `hamstercore:armor` - HC护甲值
- `hamstercore:shield` - 护盾值
- `hamstercore:regen_rate` - 护盾再生速率
- `hamstercore:regen_delay` - 护盾再生延迟（毫秒）
- `hamstercore:depleted_regen_delay` - 护盾耗尽再生延迟（毫秒）
- `hamstercore:immunity_time` - 护盾免疫时间（毫秒）

#### 物理元素伤害属性
- `hamstercore:impact` - 冲击伤害
- `hamstercore:puncture` - 穿刺伤害
- `hamstercore:slash` - 切割伤害

#### 基础元素伤害属性
- `hamstercore:cold` - 冰冻伤害
- `hamstercore:electricity` - 电击伤害
- `hamstercore:heat` - 火焰伤害
- `hamstercore:toxin` - 毒素伤害

#### 复合元素伤害属性
- `hamstercore:blast` - 爆炸伤害
- `hamstercore:corrosive` - 腐蚀伤害
- `hamstercore:gas` - 毒气伤害
- `hamstercore:magnetic` - 磁力伤害
- `hamstercore:radiation` - 辐射伤害
- `hamstercore:viral` - 病毒伤害

#### 派系伤害属性
- `hamstercore:grineer` - 克隆尼派系增伤
- `hamstercore:infested` - 感染体派系增伤
- `hamstercore:corpus` - 科普斯派系增伤
- `hamstercore:orokin` - 奥罗金派系增伤
- `hamstercore:sentient` - 灵煞派系增伤
- `hamstercore:murmur` - 低语者派系增伤

#### 特殊属性
- `attributeslib:crit_chance` - 暴击率 (基础值 0.05 = 5% 暴击率)
- `attributeslib:crit_damage` - 暴击伤害 (基础值 1.5 = 150% 暴击伤害)
- `hamstercore:trigger_chance` - 触发率

### Apothic-Attributes 属性

#### 战斗属性
- `attributeslib:armor_pierce` - 护甲穿透 (基础值 0.0)
- `attributeslib:armor_shred` - 护甲撕裂 (基础值 0.0)
- `attributeslib:cold_damage` - 冷伤害 (基础值 0.0)
- `attributeslib:current_hp_damage` - 当前生命值伤害 (基础值 0.0)
- `attributeslib:dodge_chance` - 闪避率 (基础值 0.0)
- `attributeslib:fire_damage` - 火焰伤害 (基础值 0.0)
- `attributeslib:life_steal` - 生命偷取 (基础值 0.0)
- `attributeslib:overheal` - 过度治疗 (基础值 0.0)
- `attributeslib:prot_pierce` - 保护穿透 (基础值 0.0)
- `attributeslib:prot_shred` - 保护撕裂 (基础值 0.0)

#### 远程属性
- `attributeslib:arrow_damage` - 箭伤害 (基础值 1.0 = 100% 伤害)
- `attributeslib:arrow_velocity` - 箭速度 (基础值 1.0 = 100% 速度)
- `attributeslib:draw_speed` - 拉弓速度 (基础值 1.0 = 100% 速度)

#### 通用属性
- `attributeslib:experience_gained` - 经验获得 (基础值 1.0 = 100% 经验)
- `attributeslib:ghost_health` - 幽灵生命值 (基础值 0.0)
- `attributeslib:healing_received` - 治疗效果 (基础值 1.0 = 100% 治疗)
- `attributeslib:mining_speed` - 挖掘速度 (基础值 1.0 = 100% 速度)

#### 飞行属性
- `attributeslib:elytra_flight` - 鞘翅飞行 (布尔值，默认 false)
- `attributeslib:creative_flight` - 创造飞行 (布尔值，默认 false)

### TaczAttributeAdd (TAA) 属性

#### 瞄准与精度相关
- `taa:ads_time` - 瞄准时间
- `taa:inaccuracy` - 不准确度

#### 通用伤害相关
- `taa:bullet_gundamage` - 枪械伤害

#### 分类伤害相关
- `taa:bullet_gundamage_pistol` - 手枪伤害
- `taa:bullet_gundamage_rifle` - 步枪伤害
- `taa:bullet_gundamage_shotgun` - 霰弹枪伤害
- `taa:bullet_gundamage_sniper` - 狙击枪伤害
- `taa:bullet_gundamage_smg` - 冲锋枪伤害
- `taa:bullet_gundamage_lmg` - 轻机枪伤害
- `taa:bullet_gundamage_launcher` - 发射器伤害

#### 弹药与射击相关
- `taa:ammo_speed` - 弹药速度
- `taa:bullet_count` - 子弹数量
- `taa:magazine_capacity` - 弹匣容量
- `taa:pierce` - 穿透能力
- `taa:reload_time` - 装填时间
- `taa:rounds_per_minute` - 射速

#### 后坐力与操控相关
- `taa:recoil` - 后坐力
- `taa:weight` - 重量

#### 特殊效果相关
- `taa:armor_ignore` - 护甲穿透
- `taa:effective_range` - 有效射程
- `taa:headshot_multiplier` - 爆头倍数
- `taa:knockback` - 击退效果
- `taa:silencenew` - 消音效果

#### 爆炸相关
- `taa:explosion_radius` - 爆炸半径
- `taa:explosion_damage` - 爆炸伤害
- `taa:explosion_destroy_blocknew` - 爆炸破坏方块
- `taa:explosion_delay` - 爆炸延迟
- `taa:explosion_knockbacknew` - 爆炸击退
#### 移动与近战相关
- `taa:move_speed` - 移动速度
- `taa:melee_damage` - 近战伤害
- `taa:melee_distance` - 近战距离



### 原版Minecraft 属性

#### 通用属性
- `minecraft:generic.armor` - 护甲值
- `minecraft:generic.armor_toughness` - 盔甲韧性
- `minecraft:generic.attack_damage` - 攻击伤害
- `minecraft:generic.attack_knockback` - 攻击击退
- `minecraft:generic.attack_speed` - 攻击速度
- `minecraft:generic.burning_time` - 着火时间
- `minecraft:generic.explosion_knockback_resistance` - 爆炸击退抗性
- `minecraft:generic.fall_damage_multiplier` - 摔落伤害倍数
- `minecraft:generic.flying_speed` - 飞行速度
- `minecraft:generic.follow_range` - 生物跟随距离
- `minecraft:generic.gravity` - 重力
- `minecraft:generic.jump_strength` - 跳跃力度
- `minecraft:generic.knockback_resistance` - 击退抗性
- `minecraft:generic.luck` - 幸运值
- `minecraft:generic.max_absorption` - 最大伤害吸收值
- `minecraft:generic.max_health` - 最大生命值
- `minecraft:generic.movement_efficiency` - 移动效率
- `minecraft:generic.movement_speed` - 移动速度
- `minecraft:generic.oxygen_bonus` - 额外氧气
- `minecraft:generic.safe_fall_distance` - 安全摔落高度
- `minecraft:generic.scale` - 尺寸
- `minecraft:generic.step_height` - 最大行走高度
- `minecraft:generic.water_movement_efficiency` - 水中移动效率

#### 玩家专属属性
- `minecraft:player.block_break_speed` - 方块破坏速度
- `minecraft:player.block_interaction_range` - 方块交互距离
- `minecraft:player.entity_interaction_range` - 实体交互距离
- `minecraft:player.mining_efficiency` - 挖掘效率
- `minecraft:player.sneaking_speed` - 潜行速度
- `minecraft:player.submerged_mining_speed` - 水下挖掘速度
- `minecraft:player.sweeping_damage_ratio` - 横扫伤害比率

#### 生物专属属性
- `minecraft:zombie.spawn_reinforcements` - 僵尸增援

### Forge 扩展属性

#### 通用扩展属性
- `forge:swim_speed` - 游泳速度
- `forge:attack_reach` - 攻击范围
- `forge:knockback_strength` - 击退强度
- `forge:block_damage` - 方块伤害
- `forge:experience_gain` - 经验获取

#### 玩家扩展属性
- `forge:mining_fortune` - 挖掘幸运
- `forge:fishing_luck` - 钓鱼幸运
- `forge:fishing_speed` - 钓鱼速度
- `forge:crafting_speed` - 合成速度
- `forge:enchanting_power` - 附魔能力



## 八、注意事项

1. **改装件ID命名规范**：使用小写字母、数字和下划线，避免使用特殊字符
2. **词缀类型**：确保使用已注册的词缀类型，参考上面的属性列表
3. **适用类型**：根据改装件的设计选择合适的适用武器类型
4. **互斥组命名**：使用有意义的组名，便于管理
5. **材质分辨率**：保持一致的分辨率，推荐32x32
6. **模型复杂度**：避免过于复杂的模型，影响游戏性能

## 九、测试与调试

1. **构建模组**：使用`./gradlew build`命令构建模组
2. **运行游戏**：在开发环境中运行游戏进行测试
3. **检查日志**：查看游戏日志，排查配置错误
4. **调试命令**：使用模组提供的调试命令查看改装件信息

## 十、最佳实践

1. **模块化设计**：将相关的改装件放在同一互斥组中
2. **平衡设计**：根据稀有度调整属性值，保持游戏平衡性
3. **清晰命名**：使用清晰的命名规则，便于维护
4. **文档记录**：为每个改装件编写简要说明，便于其他开发者理解
5. **定期更新**：根据游戏版本和模组更新，及时调整改装件配置

通过遵循本指南，你可以创建出功能完整、设计合理的改装件，丰富游戏的玩法和策略性。